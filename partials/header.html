<header class="bg-white shadow-sm sticky top-0 z-50">
  <div class="container mx-auto px-4 py-3 flex items-center justify-between">
    <a href="index.html" class="logo text-xl font-bold tracking-tight">Auto-Man Driving School</a>

    <!-- Desktop nav -->
    <nav class="hidden md:flex items-center gap-6 text-sm relative">
      <!-- Services + dropdown -->
      <div class="relative group">
        <a id="nav-services" href="index.html#services" class="hover:text-blue-600 inline-flex items-center gap-1">
          Services
          <svg aria-hidden="true" width="14" height="14" viewBox="0 0 20 20" class="mt-[1px]">
            <path d="M6 8l4 4 4-4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </a>

        <!-- Desktop dropdown -->
        <div
          id="nav-services-menu"
          class="absolute left-0 top-full w-64 bg-white border rounded-lg shadow-lg py-2 z-50
                hidden group-hover:block hover:block focus-within:block"
        >
          <a class="block px-4 py-2 hover:bg-blue-50" href="beginner-drivers.html">Beginner Drivers</a>
          <a class="block px-4 py-2 hover:bg-blue-50" href="driving-test-package.html">Driving Test Package</a>
          <a class="block px-4 py-2 hover:bg-blue-50" href="overseas-licence.html">Overseas Licence Conversion</a>
          <a class="block px-4 py-2 hover:bg-blue-50" href="nervous-drivers.html">Nervous Drivers</a>
          <a class="block px-4 py-2 hover:bg-blue-50" href="senior-drivers.html">Senior Driver Retests</a>
          <a class="block px-4 py-2 hover:bg-blue-50" href="special-requirements.html">Special Requirements</a>
        </div>
      </div>

      <a href="about.html" class="hover:text-blue-600">About Us</a>
      <a href="faq.html" class="hover:text-blue-600">FAQs</a>
      <a href="index.html#pricing" class="hover:text-blue-600">Lesson Packages</a>
      <a href="index.html#contact" class="hover:text-blue-600">Contact</a>
    </nav>

    <div class="flex items-center gap-3">
      <a href="tel:{{PHONE_LINK}}" class="hidden md:inline-flex items-center gap-2 text-blue-500 font-semibold hover:text-blue-600">ðŸ“ž {{PHONE}}</a>
      <a href="simplybook.html" class="hidden md:inline-block bg-blue-500 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-600 focus:ring">Book Now</a>
      <button class="md:hidden px-3 py-2 border rounded" onclick="toggleMenu()" aria-label="Toggle menu">â˜°</button>
    </div>
  </div>

  <!-- Mobile Nav -->
  <div id="mobileMenu" class="md:hidden hidden border-t">
    <nav class="container mx-auto px-4 py-3 grid gap-2 text-sm">
      <!-- Services (collapsible) -->
      <button id="mobileServicesBtn" class="flex items-center justify-between w-full py-2 text-left" onclick="toggleSubmenu()">
        <span>Services</span>
        <span aria-hidden="true">â–¾</span>
      </button>
      <div id="mobileServicesSubmenu" class="ml-3 grid gap-2 pl-3 border-l hidden">
        <a href="index.html#services" onclick="toggleMenu()">All Services</a>
        <a href="beginner-drivers.html" onclick="toggleMenu()">Beginner Drivers</a>
        <a href="driving-test-package.html" onclick="toggleMenu()">Driving Test Package</a>
        <a href="overseas-licence.html" onclick="toggleMenu()">Overseas Licence Conversion</a>
        <a href="nervous-drivers.html" onclick="toggleMenu()">Nervous Drivers</a>
        <a href="senior-drivers.html" onclick="toggleMenu()">Senior Driver Retests</a>
        <a href="special-requirements.html" onclick="toggleMenu()">Special Requirements</a>
      </div>

      <a href="about.html" onclick="toggleMenu()">About Us</a>
      <a href="faq.html" onclick="toggleMenu()">FAQs</a>
      <a href="index.html#pricing" onclick="toggleMenu()">Lesson Packages</a>
      <a href="index.html#contact" onclick="toggleMenu()">Contact</a>
      <a href="tel:{{PHONE_LINK}}" class="flex items-center gap-2 text-blue-700 font-semibold" onclick="toggleMenu()">ðŸ“ž Call {{PHONE}}</a>
      <a href="simplybook.html" class="bg-blue-500 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-600" onclick="toggleMenu()">Book Now</a>
    </nav>
  </div>

  <!-- tiny helpers -->
  <script>
    // Basic mobile menu toggle (if you already have this elsewhere, keep one copy)
    function toggleMenu() {
      var m = document.getElementById('mobileMenu');
      if (!m) return;
      m.classList.toggle('hidden');
    }
    function toggleSubmenu() {
      var s = document.getElementById('mobileServicesSubmenu');
      if (!s) return;
      s.classList.toggle('hidden');
    }

    // Make the desktop Services dropdown also open on click for touch devices
    (function () {
      var trigger = document.getElementById('nav-services');
      var menu = document.getElementById('nav-services-menu');
      if (!trigger || !menu) return;

      trigger.addEventListener('click', function (e) {
        // Only intercept on desktop area (md and up) when it's likely a touch device
        if (window.innerWidth >= 768) {
          // If the menu is hidden (no hover), toggle it on click
          var isHidden = menu.classList.contains('hidden');
          if (isHidden) {
            e.preventDefault();
            menu.classList.remove('hidden');
            // click outside to close
            var closer = function (evt) {
              if (!menu.contains(evt.target) && evt.target !== trigger) {
                menu.classList.add('hidden');
                document.removeEventListener('click', closer);
              }
            };
            document.addEventListener('click', closer);
          }
        }
      });
    })();
  </script>
</header>
